<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simple Trading AI Backtester</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
    #chart { height: 500px; margin-bottom: 20px; }
    #results { margin-top: 20px; text-align: left; font-size: 18px; }
    button { padding: 10px 20px; font-size: 18px; cursor: pointer; }
  </style>
</head>
<body>

<h1>Trading Analysis Backtester ðŸ”¥</h1>

<!-- Input for Symbol -->
<label for="symbol">Enter Symbol (e.g., BTCUSD, AAPL): </label>
<input type="text" id="symbol" value="BTCUSD" placeholder="e.g., BTCUSD">

<!-- TradingView Chart -->
<div id="chart">
  <iframe id="chartIframe" 
    src="https://s.tradingview.com/widgetembed/?frameElementId=tradingview_b43e1&symbol=BTCUSD&interval=15&hidesidetoolbar=1&symboledit=1&saveimage=1&toolbarbg=F1F3F6&studies=[]&theme=light&style=1&timezone=Etc/UTC&studies_overrides={}" 
    width="100%" height="500" frameborder="0" allowtransparency="true" scrolling="no">
  </iframe>
</div>

<!-- Run Backtest Button -->
<button id="backtestButton">Run Backtest ðŸš€</button>

<!-- Result Section -->
<div id="results"></div>

<script>
// Function to update the chart when symbol is changed
function updateChart() {
  const symbol = document.getElementById('symbol').value.trim().toUpperCase(); // Clean the input and make it uppercase
  
  // Update TradingView chart iframe with the new symbol
  const iframe = document.getElementById('chartIframe');
  iframe.src = `https://s.tradingview.com/widgetembed/?frameElementId=tradingview_b43e1&symbol=${symbol}&interval=15&hidesidetoolbar=1&symboledit=1&saveimage=1&toolbarbg=F1F3F6&studies=[]&theme=light&style=1&timezone=Etc/UTC&studies_overrides={}`;
}

// Event listener for input change
document.getElementById('symbol').addEventListener('input', updateChart);

// Backtest Button click functionality (fake data for now)
document.getElementById('backtestButton').onclick = function() {
  const symbol = document.getElementById('symbol').value.trim().toUpperCase(); // Clean input
  
  // Fake backtest data for now
  const trades = 50;
  const winRate = Math.floor(Math.random() * 50) + 50; // Random between 50-100%
  const profit = (winRate - 50) * 2; // Fake profit
  const drawdown = Math.floor(Math.random() * 20); // Random drawdown between 0% and 20%
  const sharpeRatio = (Math.random() * 2 + 1).toFixed(2); // Fake Sharpe Ratio between 1 and 3
  const profitFactor = (Math.random() * 1.5 + 1.5).toFixed(2); // Fake profit factor
  const avgTradeDuration = Math.floor(Math.random() * 60 + 5); // Random average duration (in minutes)
  const riskRewardRatio = (Math.random() * 2 + 1).toFixed(2); // Fake risk/reward ratio
  
  // Display all metrics
  document.getElementById('results').innerHTML = `
    <h2>Backtest Results for ${symbol}:</h2>
    <p><strong>Total Trades:</strong> ${trades}</p>
    <p><strong>Win Rate:</strong> ${winRate}%</p>
    <p><strong>Total Profit:</strong> +${profit}%</p>
    <p><strong>Drawdown:</strong> -${drawdown}%</p>
    <p><strong>Sharpe Ratio:</strong> ${sharpeRatio}</p>
    <p><strong>Profit Factor:</strong> ${profitFactor}</p>
    <p><strong>Average Trade Duration:</strong> ${avgTradeDuration} minutes</p>
    <p><strong>Risk/Reward Ratio:</strong> ${riskRewardRatio}</p>
  `;
};
</script>

</body>
</html>
