<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Trading Analysis Backtester</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f7fc;
      color: #333;
      margin: 0;
      padding: 0;
    }

    h1 {
      color: #0077b6;
      text-align: center;
      padding: 20px 0;
    }

    .container {
      display: flex;
      justify-content: space-between;
      padding: 20px;
      gap: 20px;
    }

    #results {
      width: 45%;
      background-color: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
    }

    #chart {
      width: 45%;
      height: 400px;
    }

    .result-item {
      margin-bottom: 10px;
    }

    .result-label {
      font-weight: bold;
      color: #0077b6;
    }

    .result-value {
      margin-left: 10px;
      font-weight: normal;
    }

    #symbol-container {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px;
    }

    #symbol-label {
      margin-right: 10px;
      font-size: 16px;
    }

    #symbol {
      padding: 10px;
      font-size: 18px;
      border-radius: 5px;
      border: 1px solid #ddd;
      width: 250px;
    }

    #backtestButton {
      padding: 12px 24px;
      font-size: 18px;
      cursor: pointer;
      background-color: #0077b6;
      color: white;
      border: none;
      border-radius: 5px;
      margin-top: 20px;
      transition: background-color 0.3s ease;
    }

    #backtestButton:hover {
      background-color: #005f8d;
    }

    #chartIframe {
      width: 100%;
      height: 400px;
      border: none;
    }

  </style>
</head>
<body>

<h1>Trading Analysis Backtester ðŸ”¥</h1>

<!-- Input for Symbol -->
<div id="symbol-container">
  <label id="symbol-label" for="symbol">Search your pair (e.g., BTCUSD, AAPL):</label>
  <input type="text" id="symbol" value="BTCUSD" placeholder="e.g., BTCUSD">
</div>

<!-- Run Backtest Button -->
<div style="text-align: center;">
  <button id="backtestButton">Run Backtest ðŸš€</button>
</div>

<!-- Container for Results and Chart -->
<div class="container">
  <!-- Results Section -->
  <div id="results" style="display:none;">
    <h2>Backtest Results</h2>
    <div class="result-item"><span class="result-label">Total Trades:</span><span class="result-value" id="totalTrades">50</span></div>
    <div class="result-item"><span class="result-label">Win Rate:</span><span class="result-value" id="winRate">78%</span></div>
    <div class="result-item"><span class="result-label">Total Profit:</span><span class="result-value" id="totalProfit">+56%</span></div>
    <div class="result-item"><span class="result-label">Drawdown:</span><span class="result-value" id="drawdown">-2%</span></div>
    <div class="result-item"><span class="result-label">Sharpe Ratio:</span><span class="result-value" id="sharpeRatio">1.72</span></div>
    <div class="result-item"><span class="result-label">Profit Factor:</span><span class="result-value" id="profitFactor">1.91</span></div>
    <div class="result-item"><span class="result-label">Average Trade Duration:</span><span class="result-value" id="avgTradeDuration">49 minutes</span></div>
    <div class="result-item"><span class="result-label">Risk/Reward Ratio:</span><span class="result-value" id="riskRewardRatio">1.35</span></div>
  </div>

  <!-- TradingView Chart -->
  <div id="chart">
    <iframe id="chartIframe" src="https://s.tradingview.com/widgetembed/?frameElementId=tradingview_b43e1&symbol=BTCUSD&interval=15&hidesidetoolbar=1&symboledit=1&saveimage=1&toolbarbg=F1F3F6&studies=[]&theme=light&style=1&timezone=Etc/UTC&studies_overrides={}" frameborder="0" allowtransparency="true" scrolling="no"></iframe>
  </div>
</div>

<script>
// Function to update the chart when symbol is changed
function updateChart() {
  const symbol = document.getElementById('symbol').value.trim().toUpperCase(); // Clean the input and make it uppercase
  const iframe = document.getElementById('chartIframe');
  iframe.src = `https://s.tradingview.com/widgetembed/?frameElementId=tradingview_b43e1&symbol=${symbol}&interval=15&hidesidetoolbar=1&symboledit=1&saveimage=1&toolbarbg=F1F3F6&studies=[]&theme=light&style=1&timezone=Etc/UTC&studies_overrides={}`;
}

// Event listener for input change
document.getElementById('symbol').addEventListener('input', updateChart);

// Backtest Button click functionality (fake data for now)
document.getElementById('backtestButton').onclick = function() {
  const symbol = document.getElementById('symbol').value.trim().toUpperCase(); // Clean input
  
  // Fake backtest data for now
  const trades = 50;
  const winRate = Math.floor(Math.random() * 50) + 50; // Random between 50-100%
  const profit = (winRate - 50) * 2; // Fake profit
  const drawdown = Math.floor(Math.random() * 20); // Random drawdown between 0% and 20%
  const sharpeRatio = (Math.random() * 2 + 1).toFixed(2); // Fake Sharpe Ratio between 1 and 3
  const profitFactor = (Math.random() * 1.5 + 1.5).toFixed(2); // Fake profit factor
  const avgTradeDuration = Math.floor(Math.random() * 60 + 5); // Random average duration (in minutes)
  const riskRewardRatio = (Math.random() * 2 + 1).toFixed(2); // Fake risk/reward ratio
  
  // Populate the result section with values
  document.getElementById('totalTrades').textContent = trades;
  document.getElementById('winRate').textContent = `${winRate}%`;
  document.getElementById('totalProfit').textContent = `+${profit}%`;
  document.getElementById('drawdown').textContent = `-${drawdown}%`;
  document.getElementById('sharpeRatio').textContent = sharpeRatio;
  document.getElementById('profitFactor').textContent = profitFactor;
  document.getElementById('avgTradeDuration').textContent = `${avgTradeDuration} minutes`;
  document.getElementById('riskRewardRatio').textContent = riskRewardRatio;

  // Show the result section
  document.getElementById('results').style.display = 'block';
};
</script>

</body>
</html>
