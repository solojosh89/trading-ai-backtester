<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Simple Trading AI Backtester</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 20px;
      background-color: #f4f7fc;
      color: #333;
    }

    h1 {
      color: #0077b6;
    }

    /* Flex container for the chart and results */
    #mainContainer {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 30px;
      margin-top: 30px;
    }

    /* Chart styling */
    #chartContainer {
      width: 100%;
      max-width: 400px;
    }

    /* Result box styling */
    #results {
      width: 100%;
      max-width: 450px;
      text-align: left;
      font-size: 18px;
      background-color: #fff;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
      border: 1px solid #ddd;
    }

    #results h2 {
      font-size: 24px;
      color: #0077b6;
      margin-bottom: 15px;
      text-align: center;
    }

    .result-item {
      padding: 10px;
      border-bottom: 1px solid #f1f1f1;
      font-size: 16px;
      color: #333;
    }

    .result-item:last-child {
      border-bottom: none;
    }

    .result-label {
      font-weight: bold;
      color: #0077b6;
    }

    .result-value {
      margin-left: 10px;
      font-weight: normal;
    }

    #backtestButton {
      padding: 12px 24px;
      font-size: 18px;
      cursor: pointer;
      background-color: #0077b6;
      color: white;
      border: none;
      border-radius: 5px;
      transition: background-color 0.3s ease;
      margin-top: 10px;
    }

    #backtestButton:hover {
      background-color: #005f8d;
    }

    #symbol {
      padding: 10px;
      font-size: 18px;
      width: 200px;
      border-radius: 5px;
      border: 1px solid #ddd;
      margin-bottom: 10px;
    }

    /* Responsive behavior */
    @media (max-width: 768px) {
      #mainContainer {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>

  <!-- Include Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<h1>Trading Analysis Backtester ðŸ”¥</h1>

<!-- Input for Symbol -->
<label for="symbol">Enter Symbol (e.g., BTCUSD, AAPL): </label>
<input type="text" id="symbol" value="BTCUSD" placeholder="e.g., BTCUSD">

<!-- Run Backtest Button -->
<br>
<button id="backtestButton">Run Backtest ðŸš€</button>

<!-- Flex container for chart and results -->
<div id="mainContainer">
  
  <!-- Chart Section -->
  <div id="chartContainer">
    <canvas id="backtestChart" width="400" height="300"></canvas>
  </div>

  <!-- Result Section -->
  <div id="results" style="display:none;">
    <h2>Backtest Results</h2>
    <div class="result-item"><span class="result-label">Total Trades:</span><span class="result-value" id="totalTrades">0</span></div>
    <div class="result-item"><span class="result-label">Win Rate:</span><span class="result-value" id="winRate">0%</span></div>
    <div class="result-item"><span class="result-label">Total Profit:</span><span class="result-value" id="totalProfit">0%</span></div>
    <div class="result-item"><span class="result-label">Drawdown:</span><span class="result-value" id="drawdown">0%</span></div>
    <div class="result-item"><span class="result-label">Sharpe Ratio:</span><span class="result-value" id="sharpeRatio">0</span></div>
    <div class="result-item"><span class="result-label">Profit Factor:</span><span class="result-value" id="profitFactor">0</span></div>
    <div class="result-item"><span class="result-label">Average Trade Duration:</span><span class="result-value" id="avgTradeDuration">0 minutes</span></div>
    <div class="result-item"><span class="result-label">Risk/Reward Ratio:</span><span class="result-value" id="riskRewardRatio">0</span></div>
  </div>
</div>

<script>
let chartInstance = null; // To store Chart.js instance so we can destroy old charts

document.getElementById('backtestButton').onclick = function() {
  const symbol = document.getElementById('symbol').value.trim().toUpperCase();
  
  // Fake backtest data generation
  const trades = 50;
  const winRate = Math.floor(Math.random() * 40) + 60; // Between 60%-100%
  const profit = (winRate - 50) * 2;
  const drawdown = Math.floor(Math.random() * 15); // 0-15%
  const sharpeRatio = (Math.random() * 2 + 1).toFixed(2);
  const profitFactor = (Math.random() * 1.5 + 1.5).toFixed(2);
  const avgTradeDuration = Math.floor(Math.random() * 60 + 5);
  const riskRewardRatio = (Math.random() * 2 + 1).toFixed(2);

  // Update Result Details
  document.getElementById('totalTrades').textContent = trades;
  document.getElementById('winRate').textContent = `${winRate}%`;
  document.getElementById('totalProfit').textContent = `+${profit}%`;
  document.getElementById('drawdown').textContent = `-${drawdown}%`;
  document.getElementById('sharpeRatio').textContent = sharpeRatio;
  document.getElementById('profitFactor').textContent = profitFactor;
  document.getElementById('avgTradeDuration').textContent = `${avgTradeDuration} minutes`;
  document.getElementById('riskRewardRatio').textContent = riskRewardRatio;

  // Show results
  document.getElementById('results').style.display = 'block';

  // Handle Chart.js
  const ctx = document.getElementById('backtestChart').getContext('2d');
  
  // Destroy old chart if it exists
  if (chartInstance !== null) {
    chartInstance.destroy();
  }

  chartInstance = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['Start', 'Trade 10', 'Trade 20', 'Trade 30', 'Trade 40', 'End'],
      datasets: [{
        label: `${symbol} Profit Curve`,
        data: [0, profit * 0.3, profit * 0.5, profit * 0.7, profit * 0.9, profit],
        borderColor: '#0077b6',
        backgroundColor: 'rgba(0, 119, 182, 0.1)',
        fill: true,
        tension: 0.4,
        pointRadius: 3,
        pointBackgroundColor: '#0077b6'
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        x: {
          title: {
            display: true,
            text: 'Trade Progress'
          }
        },
        y: {
          title: {
            display: true,
            text: 'Profit %'
          }
        }
      }
    }
  });
};
</script>

</body>
</html>
